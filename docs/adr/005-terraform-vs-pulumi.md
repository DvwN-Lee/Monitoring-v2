# ADR-005: IaC 도구로 Terraform 채택

**날짜**: 2025-10-01
**상태**: 승인됨

---

## 상황 (Context)

클라우드 인프라(VPC, EKS 클러스터, Subnet 등)를 수동으로 생성하는 것은 재현성이 떨어지고 실수를 유발하기 쉽습니다. 인프라를 코드로 관리(Infrastructure as Code, IaC)하여, 인프라 구성을 버전 관리하고, 반복 가능하며, 자동화된 방식으로 프로비저닝할 수 있는 도구가 필요했습니다.

## 결정 (Decision)

- IaC(Infrastructure as Code) 도구로 **Terraform**을 채택

## 이유 (Rationale)

전통적인 IaC 도구인 Terraform과 프로그래밍 언어를 사용하여 인프라를 정의하는 Pulumi를 주요 후보로 비교 분석했습니다.

### 비교 분석

| 기준 | Terraform | Pulumi | 선택 이유 |
|:---|:---|:---|:---|
| **언어** | **HCL (선언적 설정 언어)** | Python, Go, TypeScript 등 (범용 프로그래밍 언어) | **[핵심]** HCL은 인프라 '상태'를 선언하는 데 특화되어 있어 코드가 간결하고 직관적임. 프로그래밍 언어의 유연성(for문, if문)이 강력한 장점일 수 있지만, 간단한 인프라 정의에는 오히려 HCL의 명료함이 더 효과적임. |
| **상태 관리** | **명시적 상태 파일 (`.tfstate`)** | 상태 파일을 내부적으로 사용 | Terraform의 상태 파일은 인프라의 현재 상태를 명확하게 추적하고, `plan`을 통해 변경 사항을 사전에 예측하는 강력한 기능을 제공함. |

### 최종 선택 이유

Terraform은 사실상 클라우드 인프라 자동화의 표준으로 자리 잡았기 때문에, 관련 자료나 문서를 찾기가 매우 용이합니다. 또한, "무엇을 원하는가"를 명시하는 HCL의 **선언적(Declarative) 접근 방식**이 "어떻게 만들 것인가"를 절차적으로 서술하는 Pulumi의 **명령형(Imperative) 스타일**보다 인프라의 최종 상태를 이해하고 관리하는 데 더 적합하다고 판단했습니다.

## 결과 (Consequences)

### 긍정적 측면
-   방대한 공식 문서와 자료 덕분에 EKS 클러스터와 같은 복잡한 인프라도 상대적으로 쉽게 구성할 수 있음.
-   `terraform plan` 명령을 통해 인프라 변경 사항을 배포 전에 미리 검토하여 실수를 방지할 수 있음.
-   VPC, EKS 등을 모듈화하여 재사용 가능한 코드를 작성하고, 개발/운영 환경을 일관되게 관리할 수 있음.

### 부정적 측면 (Trade-offs)
-   HCL은 범용 프로그래밍 언어가 아니므로, 복잡한 조건부 로직이나 반복문을 구현하는 데 다소 제약이 있다.
-   상태 파일(`.tfstate`)을 안전하게 관리해야 함