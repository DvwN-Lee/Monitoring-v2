# Cloud-Native 마이크로서비스 플랫폼 요구사항 명세서

**문서 버전**: 2.0  
**작성일**: 2025년 10월 13일

---

## 문서 변경 이력

| 문서 버전 | 날짜 | 변경 사항 | 변경 사유 |
|----------|------|----------|----------|
| **1.0** | 2025-09-29 | 초안 작성 | AWS EKS 환경 기준으로 요구사항 정의 |
| **2.0** | 2025-10-13 | 클라우드 환경을 **Solid Cloud**에서 **AWS** 전환 목표로 변경, 개발/테스트를 Solid Cloud에서 진행하도록 수정, AWS는 최종 배포 옵션으로 재정의, 제약사항에 Solid Cloud 환경 반영, 비용 관련 내용을 리소스 제약으로 수정 | 단국대학교 Solid Cloud를 활용한 실습 환경 구축 결정 |

---

## 1. 프로젝트 개요

### 1.1. 프로젝트 목적
로컬 환경에서 개발된 마이크로서비스 블로그 플랫폼(v1.0)을 단국대학교 Solid Cloud 기반의 클라우드 네이티브 환경으로 전환하여, 실제 클라우드 운영 경험을 쌓고 현대적인 DevOps 기술 스택을 적용하는 것을 목적으로 합니다.

### 1.2. 프로젝트 범위
- **포함 범위**
  - Solid Cloud Kubernetes 클러스터에 마이크로서비스 배포
  - Terraform을 통한 인프라 자동화 (IaC)
  - GitOps 기반 CI/CD 파이프라인 구축
  - 서비스 메시 및 모니터링 시스템 도입
  
- **제외 범위**
  - 멀티 클러스터/멀티 리전 구성
  - Blue/Green, Canary 등 고급 배포 전략
  - 새로운 비즈니스 기능 추가

---

## 2. 현재 상태 및 문제점

### 2.1. v1.0 (로컬 환경)
- Minikube/Kind 환경에서 동작하는 6개의 마이크로서비스
- Kustomize로 매니페스트 관리
- Skaffold를 이용한 로컬 개발 환경 구축
- SQLite와 Redis를 데이터 저장소로 사용

### 2.2. 주요 문제점
1. **실제 클라우드 경험 부족**: 로컬 환경에서만 동작하여 실전 운영 경험이 없음
2. **인프라 관리의 한계**: 수동 설정으로 인한 재현성 부족
3. **자동화 부재**: CI/CD 파이프라인이 없어 배포가 비효율적
4. **확장성 제약**: SQLite 사용으로 서비스 확장 불가능
5. **모니터링 부재**: 시스템 상태를 파악하기 어려움

---

## 3. 기능 요구사항

### 3.1. 필수 요구사항 (Must-Have)

#### FR-M-1: IaC 기반 인프라 구축
- Terraform으로 Solid Cloud의 네트워크, 스토리지, Kubernetes 클러스터를 자동으로 생성
- 인프라 변경 사항이 코드로 관리되어 Git으로 버전 관리 가능

#### FR-M-2: 자동화된 CI/CD 파이프라인
- GitHub에 코드 Push 시 자동으로 다음 단계 수행:
  1. 코드 린트 및 단위 테스트
  2. 보안 취약점 스캔
  3. 컨테이너 이미지 빌드 및 레지스트리에 Push
  4. Argo CD를 통한 자동 배포

#### FR-M-3: PostgreSQL로 데이터베이스 전환
- SQLite를 PostgreSQL로 교체하여 데이터 영속성 보장
- 여러 Pod가 동시에 안전하게 데이터 접근 가능
- 서비스 수평 확장(HPA) 지원

#### FR-M-4: 기본 모니터링 시스템
- Prometheus로 주요 메트릭 수집
- Grafana 대시보드로 시스템 상태 시각화
- CPU, 메모리, 네트워크, 응답시간 등 핵심 지표 모니터링

#### FR-M-5: 기존 기능 유지
- 사용자 인증 (JWT 기반)
- 블로그 게시글 CRUD 기능
- API Gateway를 통한 라우팅

### 3.2. 권장 요구사항 (Should-Have)

#### FR-S-1: 서비스 간 통신 보안
- Istio를 사용하여 서비스 간 통신을 mTLS로 암호화
- 애플리케이션 코드 수정 없이 자동 적용

#### FR-S-2: 중앙화된 로그 관리
- Loki를 통해 모든 서비스의 로그를 중앙에서 수집
- Grafana에서 로그 검색 및 분석

#### FR-S-3: API 요청 제한
- API Gateway에 Rate Limiting 구현
- 과도한 요청으로부터 시스템 보호

### 3.3. 선택 요구사항 (Could-Have)

#### FR-C-1: 분산 추적
- Jaeger 도입으로 서비스 간 호출 흐름 추적

#### FR-C-2: 자동 확장
- CPU/메모리 사용량에 따른 Pod 자동 증감 (HPA)

---

## 4. 비기능 요구사항

### NFR-1: 성능
- **목표**: P95 응답 시간 500ms 미만
- **측정 조건**: k6로 100 RPS 부하 테스트 5분간 수행
- **측정 도구**: Prometheus + Grafana

### NFR-2: 확장성
- **목표**: CPU 70% 초과 시 자동 스케일링
- **조건**: 1분 이내에 Pod 개수 증가

### NFR-3: 가용성
- **목표**: 99% 가용률 (월간 장애 시간 7.2시간 미만)
- **조건**: Pod 장애 발생 시 5분 이내 자동 복구

### NFR-4: 보안
1. Trivy 스캔으로 HIGH/CRITICAL 취약점 0개
2. HTTPS를 통한 외부 트래픽 암호화
3. Istio mTLS로 내부 서비스 간 통신 암호화

### NFR-5: 개발 효율성
- Git Push 후 5분 이내 자동 배포 완료
- 인프라 변경 시 `terraform apply` 한 번으로 적용

---

## 5. 제약사항

### 5.1. 환경 제약
- **개발/테스트 환경**: 단국대학교 Solid Cloud
- **최종 배포 환경**: AWS (선택사항, 테스트 완료 후)
- **인력**: 1인 개발 및 운영
- **기간**: 5주 (2025년 9월 29일 ~ 10월 31일)

### 5.2. 기술 제약
- Solid Cloud의 제공 리소스 범위 내에서 구현
- 오픈소스 도구 위주로 사용 (라이선스 비용 최소화)

---

## 6. 성공 기준

### 6.1. 기능적 성공 기준
- 모든 필수 요구사항(Must-Have) 구현 완료
- CI/CD 파이프라인이 정상적으로 동작
- Solid Cloud에서 안정적으로 서비스 운영

### 6.2. 기술적 성공 기준
- 모든 비기능 요구사항(NFR) 달성
- 부하 테스트 통과 (100 RPS, P95 < 500ms)
- 보안 스캔 통과 (취약점 0개)

### 6.3. 문서화 기준
- 프로젝트 문서(README, 아키텍처, ADR) 완성
- Git Push부터 자동 배포까지 전체 과정 시연 가능

---

## 7. 향후 계획

### 7.1. Solid Cloud 테스트 완료 후
- AWS 환경으로 배포 시도
- Terraform 코드 재사용성 검증
- 클라우드 플랫폼 간 이식성 확인

### 7.2. 프로젝트 종료 후 개선 사항
- Canary 배포 전략 도입
- Service Mesh 고급 기능 활용
- 멀티 클러스터 구성 시도