# ADR-009: Kubernetes 플랫폼으로 Solid Cloud 채택

**날짜**: 2025-10-01
**상태**: 승인됨

---

## 상황 (Context)

Cloud-Native 마이크로서비스 플랫폼을 구축하기 위한 Kubernetes 클러스터 환경이 필요했습니다. 학습 목적의 프로젝트이므로 비용, 접근성, 그리고 실습 자유도를 고려하여 적절한 Kubernetes 플랫폼을 선택해야 했습니다.

## 결정 (Decision)

- **Solid Cloud** (CloudStack 기반 클라우드 플랫폼)를 Kubernetes 운영 환경으로 채택
- **Minikube**를 로컬 개발 및 테스트 환경으로 병행 사용

## 이유 (Rationale)

주요 Kubernetes 플랫폼 옵션들을 비교 분석했습니다.

### 비교 분석

| 기준 | Solid Cloud | AWS EKS | GCP GKE | Azure AKS | Minikube | 선택 이유 |
|:---|:---|:---|:---|:---|:---|:---|
| **비용** | **무료** (교육용) | 유료 ($0.10/시간 + 리소스) | 유료 (리소스 과금) | 유료 (리소스 과금) | 무료 (로컬) | 학습 목적으로 비용 부담 없음. |
| **접근성** | **단국대 학생 계정** | AWS 계정 필요 | GCP 계정 필요 | Azure 계정 필요 | **로컬 설치** | 대학 자원 활용 가능. |
| **클러스터 규모** | **멀티노드 클러스터** | 프로덕션 수준 | 프로덕션 수준 | 프로덕션 수준 | 단일 노드 | 실제 프로덕션과 유사한 환경. |
| **네트워크 환경** | **실제 네트워크** (고정 IP) | AWS VPC | GCP VPC | Azure VNet | **로컬호스트** | 외부 접근 가능한 실환경 네트워크. |
| **리소스 제한** | **중간** (교육용 할당량) | 높음 (비용 허용 범위 내) | 높음 | 높음 | **낮음** (호스트 머신 사양) | 프로젝트 요구사항 충족 가능. |
| **자동화** | 제한적 | **완전 자동화** (AWS 서비스) | **완전 자동화** (GCP 서비스) | **완전 자동화** (Azure 서비스) | 제한적 | Terraform으로 자동화 가능. |
| **실습 자유도** | **높음** | 높음 (비용 허용 시) | 높음 (비용 허용 시) | 높음 (비용 허용 시) | **매우 높음** | 제약 없이 실험 가능. |

### Solid Cloud 선택 이유

1. **비용 효율성**:
   - CloudStack 기반 무료 교육용 클라우드 플랫폼
   - AWS/GCP/Azure의 월 $100~$300 비용 부담 없음
   - 장기간 실습 환경 유지 가능

2. **실제 운영 환경 경험**:
   - 멀티노드 Kubernetes 클러스터 (Master 1, Worker 2~3)
   - 실제 네트워크 환경 (고정 IP: 10.0.11.168)
   - NodePort/LoadBalancer 타입 서비스 외부 노출 가능
   - Persistent Volume을 위한 스토리지 제공

3. **학습 목적에 적합**:
   - Terraform을 활용한 IaC 실습 가능
   - Istio, Prometheus, Grafana 등 복잡한 스택 배포 가능
   - 네트워크 트러블슈팅 경험 (실제 네트워크 환경)
   - Kubernetes 인증/인가 메커니즘 학습 (Token 기반 인증)

4. **Minikube와의 조합**:
   - Solid Cloud: 운영(Production) 환경
   - Minikube: 로컬 개발 및 빠른 테스트 환경
   - Skaffold를 활용한 로컬-클라우드 전환 자동화

### Minikube 병행 사용 이유

Solid Cloud 접근 불가 시에도 개발을 계속할 수 있도록 Minikube를 로컬 개발 환경으로 병행 사용:
- 로컬에서 빠른 반복 개발 및 테스트
- 네트워크 연결 없이 작업 가능
- `kubectl config use-context` 명령으로 컨텍스트 전환

## 결과 (Consequences)

### 긍정적 측면
- 비용 부담 없이 장기간 실제 Kubernetes 클러스터 운영 경험 획득
- 멀티노드 클러스터에서 Pod 스케줄링, 리소스 할당, 노드 장애 복구 실습
- 실제 네트워크 환경에서 Istio IngressGateway, NodePort 서비스 외부 노출 경험
- Terraform으로 클러스터 리소스를 코드로 관리하는 IaC 실습
- 대학 자원 활용으로 학습 기회 극대화
- Minikube 병행으로 로컬-클라우드 하이브리드 개발 환경 구축

### 부정적 측면 (Trade-offs)
- 상용 클라우드 대비 자동화 수준이 낮음 (로드밸런서, 스토리지 프로비저닝 등)
- 교육용 플랫폼이므로 리소스 할당량 제한 존재
- Solid Cloud 접근 권한이 제한적 (단국대 학생만 사용 가능)
- 상용 클라우드의 관리형 서비스 (RDS, ElastiCache 등) 경험 부족
- 클러스터 자체 관리 책임 (업그레이드, 백업, 보안 패치 등)
- 네트워크 문제 발생 시 대학 인프라팀 지원 필요
